(this["webpackJsonpapp-client"]=this["webpackJsonpapp-client"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},173:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},181:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(0),r=n.n(s),i=n(11),c=n.n(i),o=n(12),l=n(13),h=n(16),d=n(15),u=n(14),j=n(45),g=n.n(j),b=function(){function e(){Object(o.a)(this,e);var t=g.a.create({baseURL:"https://meshsocialserver.herokuapp.com/api",withCredentials:!0});this.service=t}return Object(l.a)(e,[{key:"signup",value:function(e){return this.service.post("/signup",e)}},{key:"login",value:function(e,t){return this.service.post("/login",{username:e,password:t})}},{key:"logout",value:function(){return this.service.post("/logout")}},{key:"loggedin",value:function(){return this.service.get("/loggedin")}}]),e}(),m=(n(172),n(29)),p=n(31),f=n(19),O=n(252),x=n(276),v=n(260),y=n(275),C=n(261),w=n(215),U=n(274),I=n(259),S=(n(173),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",email:"",firstName:"",lastName:"",typeOfUser:""},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(p.a)({},a,s))},e.handleSubmit=function(t){t.preventDefault(),(new b).signup(e.state).then((function(t){e.props.setCurrentUser(t.data),localStorage.setItem("loggedInUser",t.data._id),e.props.handleClose(),e.props.history.push("/dashboard")})),e.setState({username:"",password:"",email:"",firstName:"",lastName:"",typeOfUser:""})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"signup-container",children:Object(a.jsx)("form",{onSubmit:this.handleSubmit,className:"signup-form",children:Object(a.jsxs)(O.a,{style:{width:"80%",display:"flex",justifyContent:"spaceBetween"},children:[Object(a.jsx)(x.a,{type:"text",label:"Username",name:"username",value:this.state.username,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"password",label:"Password",name:"password",value:this.state.password,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"email",label:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"text",label:"First Name",name:"firstName",value:this.state.firstName,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"text",label:"Last Name",name:"lastName",value:this.state.lastName,onChange:this.handleChange}),Object(a.jsxs)(U.a,{value:this.state.typeOfUser,onChange:this.handleChange,name:"typeOfUser",style:{marginTop:10},children:[Object(a.jsx)(I.a,{value:"Investor",children:"Investor"}),Object(a.jsx)(I.a,{value:"Innovator",children:"Innovator"})]}),Object(a.jsx)(v.a,{style:{marginTop:"10%",marginBottom:"10%",height:50,fontSize:18},type:"submit",variant:"contained",color:"primary",children:"Signup"})]})})})}}]),n}(s.Component)),k=Object(u.g)(S),N=(n(178),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",open:!1},e.modal={display:"flex",alignItems:"center",justifyContent:"center"},e.paper={backgroundColor:"lightblue",width:"40vw",height:"60vh",display:"flex",alignItems:"center",justifyContent:"center"},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(p.a)({},a,s))},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,s=n.password;(new b).login(a,s).then((function(t){var n=t.data;e.props.setCurrentUser(n),localStorage.setItem("loggedInUser",n._id),e.props.history.push("/dashboard")})).catch((function(){m.b.error("Invalid Login")}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"login-container",children:[Object(a.jsx)("form",{onSubmit:this.handleFormSubmit,className:"form-container",children:Object(a.jsxs)(O.a,{style:{width:"16vw"},children:[Object(a.jsx)(x.a,{style:{marginBottom:30},color:"primary",type:"text",name:"username",label:"Username",value:this.state.username,onChange:this.handleChange}),Object(a.jsx)(x.a,{color:"primary",type:"password",name:"password",label:"Password",value:this.state.password,onChange:this.handleChange}),Object(a.jsx)(v.a,{type:"submit",color:"primary",variant:"contained",style:{marginTop:50,height:45,fontSize:18},children:"Login"})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{style:{fontSize:20,marginTop:-50},children:["Don't have account?",Object(a.jsx)(f.b,{to:"/",onClick:this.handleOpen,style:{textDecoration:"none",color:"blue"},children:" Signup"}),Object(a.jsx)(y.a,{"aria-labelledby":"transition-modal-title",style:this.modal,"aria-describedby":"transition-modal-description",open:this.state.open,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:C.a,BackdropProps:{timeout:500},children:Object(a.jsx)(w.a,{in:this.state.open,children:Object(a.jsx)("div",{style:this.paper,children:Object(a.jsx)(k,{loggedInUser:this.props.loggedInUser,setCurrentUser:this.props.setCurrentUser,handleClose:this.handleClose})})})})]})})]})}}]),n}(s.Component)),D=Object(u.g)(N),B=(n(111),n(262)),A=n(263),P=n(141),F=(n(179),Object(u.g)((function(e){var t=Object(B.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",background:"lightBlue",width:e.spacing(100),height:e.spacing(100),marginTop:e.spacing(.5)}}}))();return Object(a.jsx)("div",{style:{backgroundImage:"url('../images/home-background.jpg')",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"home-container",children:Object(a.jsxs)(A.a,{container:!0,spacing:0,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsx)(A.a,{item:!0,xs:6,children:Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsxs)("div",{className:"one",children:[Object(a.jsx)("h1",{children:"Investor"}),Object(a.jsx)("p",{children:"As an investor, find projects and people you are willing to take a chance on!"})]}),Object(a.jsxs)("div",{className:"two",children:[Object(a.jsx)("h1",{children:"Creator"}),Object(a.jsx)("p",{children:"As a creator, put your idea out there so that your dream can come through with the help of investors!"})]})]})}),Object(a.jsx)(A.a,{item:!0,xs:6,children:Object(a.jsx)(P.a,{className:t.paper,children:Object(a.jsx)(D,{loggedInUser:e.loggedInUser,setCurrentUser:e.setCurrentUser})})})]})})}))),E=n(277),T=n(265),z=n(264),L=n(266),R=n(258),M=n(267),_=n(268),H=n(214),q=n(130),G=n.n(q),J=n(131),$=n.n(J),K=n(133),Q=n.n(K),V=n(132),W=n.n(V),X=function(){function e(){Object(o.a)(this,e);var t=g.a.create({baseURL:"https://meshsocialserver.herokuapp.com/api",withCredentials:!0});this.service=t}return Object(l.a)(e,[{key:"getAllUsers",value:function(){return this.service.get("/users")}},{key:"getUser",value:function(e){return this.service.get("/users/".concat(e))}},{key:"deleteUser",value:function(e){return this.service.delete("/users/".concat(e))}},{key:"editUser",value:function(e,t){return this.service.put("/users/".concat(e),t)}}]),e}(),Y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:""},e.onChangeHandler=function(t){e.setState({search:t.target.value},(function(){e.props.onFilter(e.state.search)}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("form",{children:Object(a.jsx)(x.a,{label:"Search",variant:"standard",type:"text",name:"name",value:this.search,onChange:this.onChangeHandler})})}}]),n}(s.Component),Z=n(280),ee=n(279),te=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={users:[],usersCopy:[]},e.componentDidMount=function(){(new X).getAllUsers().then((function(t){e.setState({users:t.data,usersCopy:t.data})}))},e.handleSearch=function(t){var n=e.state.users.filter((function(e){return e.username.includes(t)}));e.setState({usersCopy:n})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",marginTop:5,width:"100%"},children:[Object(a.jsx)(Y,{onFilter:this.handleSearch}),Object(a.jsx)(R.a,{style:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column",width:"100%"},children:this.state.usersCopy.map((function(e,t){return e._id!==localStorage.getItem("loggedInUser")?Object(a.jsx)(H.a,{children:Object(a.jsx)(f.c,{exact:!0,to:"/profile/".concat(e._id),style:{width:"100%",textDecoration:"none",height:35},children:Object(a.jsx)(ee.a,{avatar:Object(a.jsx)(Z.a,{style:{height:25,width:25,backgroundColor:"#7ED5EA",fontSize:17,color:"white"},children:e.username.charAt(0)}),label:e.username,style:{width:"100%",display:"flex",alignItems:"left",justifyContent:"left",height:35}})})},t):null}))})]})}}]),n}(r.a.Component),ne=Object(B.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:180,flexShrink:0},drawerPaper:{width:190},usersDrawerPaper:{width:230},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)}}})),ae=Object(u.g)((function(e){var t=ne();return null!==e.loggedInUser?Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(z.a,{}),Object(a.jsx)(T.a,{position:"fixed",className:t.appBar,style:{backgroundColor:"#63BCE5"},children:Object(a.jsxs)(L.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(a.jsx)(M.a,{variant:"h6",children:"App"}),Object(a.jsxs)(M.a,{variant:"h6",children:[" Hey ",e.loggedInUser.username," \ud83d\udc4b"]})]})}),Object(a.jsxs)(E.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},children:[Object(a.jsx)(L.a,{}),Object(a.jsx)("div",{className:t.drawerContainer,children:Object(a.jsxs)(R.a,{children:[Object(a.jsxs)(H.a,{button:!0,children:[Object(a.jsx)(f.c,{style:{height:"100%",width:"100%",textDecoration:"none",color:"black",fontSize:18},exact:!0,to:"/dashboard",children:"Home"}),Object(a.jsx)(G.a,{style:{marginRight:"7%"}})]}),Object(a.jsx)(_.a,{}),Object(a.jsxs)(H.a,{button:!0,children:[Object(a.jsx)(f.c,{style:{width:"100%",textDecoration:"none",color:"black",fontSize:18},exact:!0,to:"/profile",children:"Profile"}),Object(a.jsx)($.a,{style:{marginRight:"7%"}})]}),Object(a.jsx)(_.a,{}),Object(a.jsxs)(H.a,{button:!0,children:[Object(a.jsx)(f.c,{style:{width:"100%",textDecoration:"none",color:"black",fontSize:18},exact:!0,to:"/chat",children:"Chat"}),Object(a.jsx)(W.a,{style:{marginRight:"7%"}})]}),Object(a.jsx)(_.a,{}),Object(a.jsxs)(H.a,{button:!0,onClick:function(){(new b).logout().then((function(){e.setCurrentUser(null),localStorage.removeItem("loggedInUser"),e.history.push("/")}))},children:[Object(a.jsx)(f.c,{style:{width:"100%",textDecoration:"none",color:"black",fontSize:18},exact:!0,to:"/",children:"Logout"}),Object(a.jsx)(Q.a,{style:{marginRight:"7%"}})]}),Object(a.jsx)(_.a,{})]})})]}),Object(a.jsxs)(E.a,{className:t.drawer,variant:"permanent",anchor:"right",classes:{paper:t.usersDrawerPaper},children:[Object(a.jsx)(L.a,{}),Object(a.jsx)("div",{className:t.drawerContainer,children:Object(a.jsx)(R.a,{children:Object(a.jsx)(H.a,{children:Object(a.jsx)(te,{})})})})]}),Object(a.jsx)("main",{className:t.content,children:Object(a.jsx)(L.a,{})})]}):null})),se=n(60),re=function(){function e(){Object(o.a)(this,e);var t=g.a.create({baseURL:"https://meshsocialserver.herokuapp.com/api",withCredentials:!0});this.service=t}return Object(l.a)(e,[{key:"createConnection",value:function(e){return this.service.post("/connections/".concat(e))}},{key:"deleteConnection",value:function(e){return this.service.delete("/connections/".concat(e))}},{key:"getUserConnections",value:function(){return this.service.get("/connections/user")}}]),e}(),ie=n(271),ce=n(82),oe=n(81),le=(n(112),n(80)),he=n.n(le),de=n(135),ue=n.n(de),je=n(269),ge=n(270),be=n(272),me=n(134),pe=n.n(me),fe=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",firstName:"",lastName:"",bio:"",typeOfUser:""},e.componentDidMount=function(){e.setState({username:e.props.loggedInUser.username,email:e.props.loggedInUser.email,firstName:e.props.loggedInUser.firstName,lastName:e.props.loggedInUser.lastName,bio:e.props.loggedInUser.bio,typeOfUser:e.props.loggedInUser.typeOfUser})},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(p.a)({},a,s))},e.handleFormSubmit=function(t){t.preventDefault(),e.props.updateUser(e.state),e.props.handleClose()},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("form",{onSubmit:this.handleFormSubmit,className:"signup-form",children:Object(a.jsxs)(O.a,{style:{width:"80%",display:"flex",justifyContent:"spaceBetween"},children:[Object(a.jsx)(x.a,{type:"text",label:"Username",name:"username",value:this.state.username,disabled:!0}),Object(a.jsx)(x.a,{type:"email",label:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"text",label:"First Name",name:"firstName",value:this.state.firstName,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"text",label:"Last Name",name:"lastName",value:this.state.lastName,onChange:this.handleChange}),Object(a.jsx)(x.a,{type:"textarea",label:"Bio",name:"bio",value:this.state.bio,onChange:this.handleChange,multiline:!0,rows:2,rowsMax:4}),Object(a.jsx)(x.a,{placeholder:this.state.typeOfUser,name:"typeOfUser",style:{marginTop:10},disabled:!0}),Object(a.jsx)(v.a,{style:{marginTop:"10%",marginBottom:"10%",height:50,fontSize:18},type:"submit",variant:"contained",color:"primary",children:"Save"})]})})}}]),n}(s.Component),Oe=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",firstName:"",lastName:"",bio:"",typeOfUser:"",connections:[],pendingConnections:[],open:!1},e.modal={display:"flex",alignItems:"center",justifyContent:"center"},e.paper={backgroundColor:"lightblue",width:"40vw",height:"60vh",display:"flex",alignItems:"center",justifyContent:"center"},e.userService=new X,e.updateUser=function(t){e.userService.editUser(localStorage.getItem("loggedInUser"),t).then((function(t){var n=t.data;e.setState({username:n.username,email:n.email,firstName:n.firstName,lastName:n.lastName,bio:n.bio,typeOfUser:n.typeOfUser})}))},e.handleAccept=function(t,n,a){var s=localStorage.getItem("loggedInUser");n.connections.push(s);var r=new re,i=Object(se.a)(e.state.pendingConnections);i.splice(a,1);var c=Object(se.a)(e.state.connections);c.push(n.userId);var o=e.userService.editUser(s,{$push:{connections:n.userId}}),l=e.userService.editUser(n.userId,{$push:{connections:s}}),h=r.deleteConnection(t);Promise.all([o,l,h]).then((function(t){e.setState({connections:c,pendingConnections:i}),m.b.success("Connection accepted!")}))},e.handleDecline=function(t,n){var a=new re,s=Object(se.a)(e.state.pendingConnections);s.splice(n,1),e.setState({pendingConnections:s}),a.deleteConnection(t).then((function(){m.b.success("Connection rejected!")}))},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("loggedInUser"),n=this.userService.getUser(t),a=(new re).getUserConnections();Promise.all([n,a]).then((function(n){var a=n[0].data,s=a.username,r=a.email,i=a.firstName,c=a.lastName,o=a.bio,l=a.typeOfUser,h=a.connections,d=n[1].data.map((function(e){return e.from===t?{user:e.to,id:e._id,from:!0}:{user:e.from,id:e._id,from:!1}})),u=[];d.forEach((function(t){u.push(e.userService.getUser(t.user))})),Promise.all(u).then((function(t){t.forEach((function(e,t){d[t].user=e.data.username,d[t].userId=e.data._id,d[t].connections=e.data.connections})),e.setState({username:s,email:r,firstName:i,lastName:c,bio:o,typeOfUser:l,connections:h,pendingConnections:d})}))}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"profile-container",children:Object(a.jsxs)(je.a,{children:[Object(a.jsxs)(ge.a,{className:"profile-section",children:[Object(a.jsxs)("div",{className:"avatar-section",children:[Object(a.jsx)(Z.a,{style:{height:100,width:100}}),Object(a.jsx)(M.a,{variant:"h4",style:{marginTop:"20%",color:"rgba(9, 161, 245)"},children:this.state.username})]}),Object(a.jsx)("hr",{style:{width:1,height:"100%",backgroundColor:"lightgrey",border:"none",marginRight:10,marginLeft:-45}}),Object(a.jsxs)("div",{className:"info-section",children:[Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"Name:"}),Object(a.jsxs)(M.a,{children:[this.state.firstName," ",this.state.lastName]}),Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"Email:"}),Object(a.jsx)(M.a,{children:this.state.email}),Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"I'm an:"}),Object(a.jsx)(M.a,{children:this.state.typeOfUser}),Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"Biography:"}),Object(a.jsx)(M.a,{children:this.state.bio})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(y.a,{"aria-labelledby":"transition-modal-title",style:this.modal,"aria-describedby":"transition-modal-description",open:this.state.open,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:C.a,BackdropProps:{timeout:500},children:Object(a.jsx)(w.a,{in:this.state.open,children:Object(a.jsx)("div",{style:this.paper,children:Object(a.jsx)(fe,{updateUser:this.updateUser,handleClose:this.handleClose,loggedInUser:this.state})})})}),Object(a.jsx)(ie.a,{color:"default","aria-label":"edit",onClick:this.handleOpen,children:Object(a.jsx)(pe.a,{})})]})]}),Object(a.jsx)(je.a,{children:Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(M.a,{variant:"h6",children:"Pending requests:"}),this.state.pendingConnections.map((function(t,n){return t.from?Object(a.jsx)("div",{children:Object(a.jsxs)(je.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"3%",alignItems:"center",height:50},children:[Object(a.jsx)(M.a,{variant:"body1",children:"Sent to:"}),Object(a.jsx)(M.a,{variant:"body1",style:{fontSize:15},children:t.user}),Object(a.jsx)(be.a,{children:Object(a.jsx)(Z.a,{style:{backgroundColor:"rgba(9, 161, 245)"},children:e.state.username.charAt(0)})})]},t.id)},{index:n}):Object(a.jsxs)(je.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",marginTop:"3%",alignItems:"center",height:50},children:[Object(a.jsx)(M.a,{variant:"body1",children:"From:"}),Object(a.jsx)(be.a,{children:Object(a.jsx)(Z.a,{})}),Object(a.jsx)(M.a,{variant:"body1",style:{fontSize:15},children:t.user}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(a.jsx)(v.a,{size:"small",variant:"contained",style:{backgroundColor:ce.a[500],color:"white",marginRight:20},onClick:function(){return e.handleAccept(t.id,t,n)},children:Object(a.jsx)(he.a,{})}),Object(a.jsx)(v.a,{size:"small",variant:"contained",style:{backgroundColor:oe.a[500],color:"white"},onClick:function(){return e.handleDecline(t.id,n)},children:Object(a.jsx)(ue.a,{})})]})]},t.id)}))]})})]})})}}]),n}(s.Component),xe=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",email:"",firstName:"",lastName:"",bio:"",typeOfUser:"",connections:[],id:"",status:""},e.componentDidUpdate=function(t,n){t.match.params.id!==e.props.match.params.id&&e.getUserDetails()},e.handleConnection=function(t){console.log(t);var n=localStorage.getItem("loggedInUser"),a=new re;a.getUserConnections().then((function(s){s.data.filter((function(e){return e.from===t&&e.to===n||e.to===t&&e.from===n})).length||a.createConnection(t).then((function(t){m.b.success("Connection Requested"),e.setState({status:"pending"})}))}))},e}return Object(l.a)(n,[{key:"getUserDetails",value:function(){var e=this,t=this.props.match.params.id;t===localStorage.getItem("loggedInUser")&&this.props.history.push("/profile");var n="";(new X).getUser(t).then((function(a){(new re).getUserConnections().then((function(s){s.data.filter((function(e){return e.from===t&&e.to===localStorage.getItem("loggedInUser")||e.to===t&&e.from===localStorage.getItem("loggedInUser")})).length>0&&(n="pending"),a.data.connections.includes(localStorage.getItem("loggedInUser"))&&"pending"!==n?n="connected":a.data.connections.includes(localStorage.getItem("loggedInUser"))||"pending"===n||(n="notConnected"),console.log(n),e.setState({username:a.data.username,email:a.data.email,firstName:a.data.firstName,lastName:a.data.lastName,bio:a.data.bio,typeOfUser:a.data.typeOfUser,connections:a.data.connections,id:a.data._id,status:n})}))}))}},{key:"componentDidMount",value:function(){this.getUserDetails()}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"profile-container",children:Object(a.jsx)(je.a,{children:Object(a.jsxs)(ge.a,{className:"profile-section",children:[Object(a.jsxs)("div",{className:"avatar-section",children:[Object(a.jsx)(Z.a,{style:{backgroundColor:"rgba(9, 161, 245)",height:100,width:100,fontSize:55},children:this.state.username.charAt(0)}),Object(a.jsx)(M.a,{variant:"h4",style:{marginTop:"20%",color:"rgba(9, 161, 245)"},children:this.state.username})]}),Object(a.jsxs)("div",{className:"info-section",children:[Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"Name:"}),Object(a.jsxs)(M.a,{children:[this.state.firstName," ",this.state.lastName]}),Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"Email:"}),Object(a.jsx)(M.a,{children:this.state.email}),Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"I'm an:"}),Object(a.jsx)(M.a,{children:this.state.typeOfUser}),Object(a.jsx)(M.a,{style:{color:"#4B9FE1"},children:"Biography:"}),Object(a.jsx)(M.a,{children:this.state.bio}),"connected"===this.state.status?Object(a.jsx)(v.a,{disabled:!0,variant:"contained",style:{backgroundColor:ce.a[500],color:"white",width:"52%"},children:"Connected \ud83e\udd1d"}):"pending"===this.state.status?Object(a.jsx)(v.a,{disabled:!0,variant:"contained",style:{width:"50%",backgroundColor:"lightgrey",color:"black"},children:"Pending \u231b"}):Object(a.jsxs)(v.a,{size:"small",variant:"contained",style:{backgroundColor:ce.a[500],color:"white",width:"50%"},onClick:function(){return e.handleConnection(e.state.id)},children:["Connect ",Object(a.jsx)(he.a,{})]})]})]})})})}}]),n}(s.Component),ve=Object(u.g)(xe),ye=function(){function e(){Object(o.a)(this,e);var t=g.a.create({baseURL:"https://meshsocialserver.herokuapp.com/api",withCredentials:!0});this.service=t}return Object(l.a)(e,[{key:"getAllPosts",value:function(){return this.service.get("/posts")}},{key:"getPost",value:function(e){return this.service.get("/posts/".concat(e))}},{key:"getPostsByOwner",value:function(e){return this.service.get("/posts/owner/".concat(e))}},{key:"createPost",value:function(e){return this.service.post("/posts",e)}},{key:"editPost",value:function(e,t){return this.service.put("/posts/".concat(t),e)}},{key:"deletePost",value:function(e){return this.service.delete("/posts/delete/".concat(e))}}]),e}(),Ce=n(136),we=n.n(Ce),Ue=(n(181),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={content:"",posts:[],username:"",connections:[]},e.getAllPosts=function(){var t=e.props.loggedInUser,n=(new ye).getAllPosts(),a=new X,s=a.getUser(t);Promise.all([s,n]).then((function(t){var n=t[0].data,s=n.username,r=n.connections,i=t[1].data,c=[];i.forEach((function(e){c.push(a.getUser(e.user))})),Promise.all(c).then((function(t){t.forEach((function(e,t){i[t].username=e.data.username})),e.setState({username:s,connections:r,posts:i})}))}))},e.componentDidMount=function(){e.getAllPosts()},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(p.a)({},a,s))},e.handleFormSubmit=function(t){t.preventDefault(),(new ye).createPost(e.state).then((function(){e.setState({content:""}),m.b.success("Post created!")}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.content!==this.state.content&&this.getAllPosts()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[Object(a.jsx)(je.a,{style:{width:"40%",marginBottom:40},children:Object(a.jsx)(ge.a,{children:Object(a.jsxs)("form",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly"},children:[Object(a.jsx)(x.a,{label:"Post",multiline:!0,rows:2,variant:"outlined",type:"text",name:"content",style:{width:"70%"},value:this.state.content,onChange:this.handleChange,required:!0}),Object(a.jsx)(ie.a,{onClick:this.handleFormSubmit,style:{backgroundColor:"#4B9FE1"},"aria-label":"add",children:Object(a.jsx)(we.a,{style:{color:"white"}})})]})})}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{style:{width:"40%",marginBottom:40},children:this.state.posts.map((function(t,n){return e.state.connections.includes(t.user)||t.user===localStorage.getItem("loggedInUser")||!e.state.connections.length?Object(a.jsx)(je.a,{style:{marginBottom:30},children:Object(a.jsxs)(ge.a,{className:"post-section",children:[Object(a.jsxs)("div",{className:"post-avatar-section",children:[Object(a.jsx)(Z.a,{style:{backgroundColor:"#63BCE5",height:70,width:70,fontSize:55},children:t.username.charAt(0)}),Object(a.jsx)(M.a,{variant:"h5",style:{marginTop:"10%"},children:t.username})]}),Object(a.jsx)("hr",{style:{width:1,height:"100%",backgroundColor:"lightgrey",border:"none",marginRight:15,marginLeft:-25}}),Object(a.jsx)("div",{className:"content-section",children:Object(a.jsx)(M.a,{style:{height:20,margin:0,padding:0},children:t.content})})]})},n):null}))})]})}}]),n}(r.a.Component)),Ie=n(137),Se=n.n(Ie).a.connect("https://meshsocialserver.herokuapp.com",{withCredentials:!0}),ke=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={message:"",name:"",chat:[]},e.onTextChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.onMessageSubmit=function(t){t.preventDefault();var n=e.state,a=n.name,s=n.message;Se.emit("message",{name:a,message:s}),e.setState({message:"",name:a})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Se.on("message",(function(t){var n=t.name,a=t.message;e.setState({chat:[].concat(Object(se.a)(e.state.chat),[{name:n,message:a}])})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[Object(a.jsxs)("form",{onSubmit:this.onMessageSubmit,children:[Object(a.jsx)("div",{children:Object(a.jsx)(x.a,{name:"name",onChange:function(t){return e.onTextChange(t)},value:this.state.name,label:"Name"})}),Object(a.jsx)("div",{children:Object(a.jsx)(x.a,{name:"message",onChange:function(t){return e.onTextChange(t)},value:this.state.message,id:"outlined-multiline-static",variant:"standard",label:"Message"})}),Object(a.jsx)(v.a,{variant:"outlined",color:"primary",type:"submit",children:"Send"})]}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"left",justifyContent:"left",flexDirection:"column"},children:[Object(a.jsx)("h1",{children:"Chat"}),this.state.chat.map((function(e,t){var n=e.name,s=e.message;return Object(a.jsx)(je.a,{style:{backgroundColor:"rgba(9, 161, 245)",color:"white",marginTop:10},children:Object(a.jsxs)("h3",{style:{padding:10},children:[n,": ",Object(a.jsx)("span",{children:s})]})},t)}))]})]})}}]),n}(r.a.Component),Ne=n(138),De=n(273),Be=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={loggedInUser:null},e.theme=Object(Ne.a)({palette:{type:"light"}}),e.setCurrentUser=function(t){e.setState({loggedInUser:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;null===this.state.loggedInUser&&(new b).loggedin().then((function(t){t.data._id?e.setCurrentUser(t.data):localStorage.removeItem("loggedInUser")}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(De.a,{theme:this.theme,children:[Object(a.jsx)(m.a,{}),Object(a.jsx)(ae,{loggedInUser:this.state.loggedInUser,setCurrentUser:this.setCurrentUser}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/dashboard",render:function(){return localStorage.getItem("loggedInUser")?Object(a.jsx)(Ue,{loggedInUser:localStorage.getItem("loggedInUser"),setCurrentUser:e.setCurrentUser}):Object(a.jsx)(u.a,{to:"/"})}}),Object(a.jsx)(u.b,{path:"/chat",render:function(){return localStorage.getItem("loggedInUser")?Object(a.jsx)(ke,{}):Object(a.jsx)(u.a,{to:"/"})}}),Object(a.jsx)(u.b,{exact:!0,path:"/profile",render:function(){return localStorage.getItem("loggedInUser")?Object(a.jsx)(Oe,{}):Object(a.jsx)(u.a,{to:"/"})}}),Object(a.jsx)(u.b,{exact:!0,path:"/profile/:id",render:function(){return localStorage.getItem("loggedInUser")?Object(a.jsx)(ve,{}):Object(a.jsx)(u.a,{to:"/"})}}),Object(a.jsx)(u.b,{exact:!0,path:"/",render:function(){return localStorage.getItem("loggedInUser")?Object(a.jsx)(u.a,{to:"/dashboard"}):Object(a.jsx)(F,{loggedInUser:localStorage.getItem("loggedInUser"),setCurrentUser:e.setCurrentUser})}})]})]})})}}]),n}(r.a.Component),Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,281)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};c.a.render(Object(a.jsx)(f.a,{children:Object(a.jsx)(Be,{})}),document.getElementById("root")),Ae()}},[[212,1,2]]]);
//# sourceMappingURL=main.1f121c8e.chunk.js.map